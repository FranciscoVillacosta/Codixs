<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Botón SOS Web</title>
<style>
  body {
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    background: #f0f0f0;
  }
  button {
    padding: 20px 40px;
    font-size: 20px;
    border-radius: 12px;
    background: red;
    color: white;
    border: none;
    cursor: pointer;
  }
</style>
</head>
<body>
<h1>Enviar ubicación por WhatsApp</h1>
<button id="sendBtn">🚨 Enviar ubicación</button>

<script>
const phone = "528771288865"; // Número de WhatsApp en formato internacional

// Función que obtiene la ubicación y abre WhatsApp
function sendLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      const message = `📍 Mi ubicación: https://maps.google.com/?q=${lat},${lon}`;
      const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
      window.open(url, "_blank"); // Abre WhatsApp
    }, function(error) {
      alert("No se pudo obtener la ubicación: " + error.message);
    });
  } else {
    alert("Geolocalización no soportada en este navegador.");
  }
}

// Botón en la web
document.getElementById("sendBtn").addEventListener("click", sendLocation);

// Captura tecla de botón Bluetooth tipo selfie (Enter, ArrowUp, etc.)
document.addEventListener("keydown", function(event) {
  // Ajusta según la tecla que detectes en tu botón
  if (event.key === "volumeup" ) {
    sendLocation();
  }
});

//Para detectar qué tecla manda tu botón, descomenta esto:
document.addEventListener("keydown", e => console.log("Tecla:", e.key, "Código:", e.code));
</script>
</body>
</html>
